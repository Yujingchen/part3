(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(13),r=t.n(c),u=(t(19),t(2)),l=function(e){var n=e.persons,t=e.query,a=e.handleSearchTextChange,c=""!==t?n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})):null,r=c?c.map((function(e){return o.a.createElement("p",{key:e.name},e.name," ",e.number)})):null;return o.a.createElement("div",null,"filter shown with: ",o.a.createElement("input",{value:t,onChange:a}),r)},i=function(e){var n=e.hanldeSubmit,t=e.newName,a=e.newNumber,c=e.handleNameTextChange,r=e.handleNumberTextChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"add a new"),o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:t,onChange:c})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:a,onChange:r})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.persons,t=e.handleDeleteContact,a=n.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("span",null,e.name," ",e.number),o.a.createElement("span",null,o.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name))&&t(e.id)}(e)}},"delete")))}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Numbers"),a)},m=function(e){var n=e.message,t=e.successMessage;return n?o.a.createElement("div",{style:{color:"red",backgroundColor:"grey",fontSize:"20px"},className:"error"},n):t?o.a.createElement("div",{style:{color:"green",backgroundColor:"grey",fontSize:"20px",border:"3px solid green"},className:"success"},t):null},f=t(3),h=t.n(f),d="/api/persons",g=function(){return h.a.get(d).then((function(e){return e.data}))},b=function(e){return h.a.post(d,e).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(d,"/").concat(e),n)},v=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),f=Object(u.a)(r,2),h=f[0],d=f[1],v=Object(a.useState)(""),w=Object(u.a)(v,2),C=w[0],S=w[1],O=Object(a.useState)(""),j=Object(u.a)(O,2),N=j[0],x=j[1],y=Object(a.useState)(""),k=Object(u.a)(y,2),T=k[0],D=k[1],M=Object(a.useState)(""),q=Object(u.a)(M,2),z=q[0],F=q[1];Object(a.useEffect)((function(){g().then((function(e){c(e)}))}),[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(m,{message:T,successMessage:z}),o.a.createElement(l,{persons:t,query:N,handleSearchTextChange:function(e){x(e.target.value)}}),o.a.createElement(i,{hanldeSubmit:function(e){if(e.preventDefault(),t.filter((function(e){return e.name===h})).length>0){if(window.confirm("".concat(h," is already add to phonebook, replace the old number with a new one?"))){var n={name:h,number:C},a=t.find((function(e){return e.name===h})).id,o=t.filter((function(e){return e.id!==a}));E(a,n).then((function(e){console.log("axios then"),c(o.concat(e))})).catch((function(e){console.log("errorMessage"),console.log(e),D("Something wrong happen when updating number for ".concat(h),(function(){console.log(T)})),setTimeout((function(){D(null)}),5e3)}))}}else b({name:h,number:C}).then((function(e){c(t.concat(e))})).then((function(e){F("Added ".concat(h)),console.log(z),setTimeout((function(){F(null)}),5e3)})).catch((function(e){console.log("errorMessage"),console.log(e.message),D("Name should have at least 3 characters. Number should have at least 8 digits",(function(){console.log(T)})),setTimeout((function(){D(null)}),5e3)}));d(""),S("")},handleNameTextChange:function(e){d(e.target.value)},handleNumberTextChange:function(e){S(e.target.value)},newName:h,newNumber:C}),o.a.createElement(s,{persons:t,handleDeleteContact:function(e){return function(e){p(e).then((function(){c(t.filter((function(n){return n.id!==e})))})).then((function(e){F("Delete contact successfully"),console.log(z),setTimeout((function(){F(null)}),5e3)})).catch((function(e){D("Something wrong happen when deleting a contact"),setTimeout((function(){D(null)}),5e3)}))}(e)}}))};r.a.render(o.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.49082b63.chunk.js.map